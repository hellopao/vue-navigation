/**
* vue-navigation v1.1.1
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueNavigation=e()}(this,function(){"use strict";function t(){return"xxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function e(t,e){return(t.name||t.path)+"?"+t.query[e]}function n(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!isRegExp(t)&&t.test(e)}var o=[];window.sessionStorage.VUE_NAVIGATION&&(o=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var i=o,r=[],a=function(t,n,o,a){n&&n.registerModule(o,{state:{routes:i},mutations:{"navigation/FORWARD":function(t,e){e.to,e.from;var n=e.name;t.routes.push(n)},"navigation/BACK":function(t,e){e.to,e.from;var n=e.count;t.routes.splice(t.routes.length-n,n)},"navigation/REPLACE":function(t,e){e.to,e.from;var n=e.name;t.routes.splice(i.length-1,1,n)},"navigation/REFRESH":function(t,e){e.to,e.from},"navigation/RESET":function(t){t.routes.splice(0,t.routes.length)}}});var s=function(e,a,s){var c={route:a},u={route:s},f=n?n.state[o].routes:i;u.name=f[f.length-1]||null,c.name=e,n?n.commit("navigation/FORWARD",{to:c,from:u,name:e}):f.push(e),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(f),t.$emit("forward",c,u),r.push(document.title)},c=function(e,a,s){var c={route:a,title:r.pop()},u={route:s},f=n?n.state[o].routes:i;u.name=f[f.length-1],c.name=f[f.length-1-e],n?n.commit("navigation/BACK",{to:c,from:u,count:e}):f.splice(i.length-e,e),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(f),t.$emit("back",c,u)},u=function(e,r,a){var s={route:r},c={route:a},u=n?n.state[o].routes:i;c.name=u[u.length-1]||null,s.name=e,n?n.commit("navigation/REPLACE",{to:s,from:c,name:e}):u.splice(i.length-1,1,e),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),t.$emit("replace",s,c)},f=function(e,r){var a={route:e},s={route:r},c=n?n.state[o].routes:i;a.name=s.name=c[c.length-1],n&&n.commit("navigation/REFRESH",{to:a,from:s}),t.$emit("refresh",a,s)};return{record:function(t,n,o){var r=e(t,a);if(o)u(r,t,n);else{var m=i.lastIndexOf(r);-1===m?s(r,t,n):m===i.length-1?f(t,n):c(i.length-1-m,t,n)}},reset:function(){n?n.commit("navigation/RESET"):i.splice(0,i.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),t.$emit("reset")}}},s=function(t){return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:i}},computed:{},watch:{routes:function(t){for(var e in this.cache)if(!n(t,e)){var o=this.cache[e];o&&o.componentInstance.$destroy(),delete this.cache[e]}}},created:function(){this.cache={}},destroyed:function(){for(var t in this.cache){var e=this.cache[t];e&&e.componentInstance.$destroy()}},render:function(){var n=this.$slots.default?this.$slots.default[0]:null;if(n){n.key=n.key||(n.isComment?"comment":n.tag);var o=e(this.$route,t);-1===n.key.indexOf(o)&&(n.key="__navigation-"+o+"-"+n.key),this.cache[o]?n.key===this.cache[o].key?n.componentInstance=this.cache[o].componentInstance:(this.cache[o].componentInstance.$destroy(),this.cache[o]=n):this.cache[o]=n,n.data.keepAlive=!0}return n}}},c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};return{install:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.router,r=n.store,u=n.moduleName,f=void 0===u?"navigation":u,m=n.keyName,l=void 0===m?"VNK":m;if(o){var h=new e,g=a(h,r,f,l),v=o.replace.bind(o),p=!1;o.replace=function(t,e,n){p=!0,v(t,e,n)},o.beforeEach(function(e,n,o){if(e.query[l])o();else{var i=c({},e.query);i[l]=t(),o({path:e.path,query:i,replace:p||!n.query[l]})}}),o.afterEach(function(t,e){g.record(t,e,p),p=!1}),e.component("navigation",s(l)),e.navigation=e.prototype.$navigation={on:function(t,e){h.$on(t,e)},once:function(t,e){h.$once(t,e)},off:function(t,e){h.$off(t,e)},getRoutes:function(){return i.slice()},cleanRoutes:function(){return g.reset()}}}else console.error("vue-navigation need options: router")}}});